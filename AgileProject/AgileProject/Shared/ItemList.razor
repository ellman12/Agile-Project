@* Displays a list of items as ListItems. *@
@* @typeparam T *@

<link href="css/components/ItemList.css" rel="stylesheet"/>

@if (Source.Count == 0)
{
	return;
}

<header style="visibility: @(selectedItems.Count > 0 ? "visible" : "hidden")">
	<IconButton Icon="close" OnClick="@(() => selectedItems.Clear())"/>
	<span id="selectedAmt">@selectedItems.Count&nbsp;&nbsp;Selected</span>
</header>

<div class="itemList">
	@foreach (Guid item in Source)
	{
		<IconButton Icon="check_circle" IconColorHex="@(selectedItems.Contains(item) ? "0062FF" : "FFFFFF")" OnClick="@(() => CheckClicked(item))"/>
		
		//TODO: can't fully do this until these records exist.
		@* if (typeName == "Folder") *@
		@* { *@
		@* 	<ListItem Name="@" URL=""/> *@
		@* } *@
		@* else if (typeName == "Set") *@
		@* { *@
		@* 	<ListItem Name="@" URL=""/> *@
		@* } *@
	}
</div>

@code {

	[Parameter, EditorRequired] public List<Guid> Source { get; set; } = null!;

	private string typeName;

	private HashSet<Guid> selectedItems;

	protected override void OnInitialized()
	{
		// if (Source.Count == 0) return;
		// typeName = Source.First()!.GetType().Name;
		selectedItems = new HashSet<Guid>();

		Source = new List<Guid> {Guid.NewGuid(), Guid.NewGuid(), Guid.NewGuid()}; //TODO: this type will actually be passed in and be some record with a uuid field inside...
	}
}

@functions {

	private void CheckClicked(Guid uuid)
	{
		if (selectedItems.Contains(uuid))
			selectedItems.Remove(uuid);
		else
			selectedItems.Add(uuid);
		StateHasChanged();
	}

}